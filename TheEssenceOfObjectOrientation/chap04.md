# 04. 역할, 책임, 협력 #
    
    
최후통첩 게임 -> 어떤 상황에 처했느냐가 인간의 행동을 결정.  
즉, 개인이 처한 "정황" 또는 "문맥"이 인간의 행동 방식 결정.  
  
인간의 행동 결정하는 문맥 = 타인과의 "협력"  
 
 -----------------
 ### [협력] ###   
협력의 본질 : 요청 + 응답으로 연결된 네트워크  
  
하트 잭의 재판 = 객체들의 동일한 목적, 협력하는 이유  
  
인물이 요청을 받아들일 수 있는 이유 = 적절한 방식으로 응답할 수 있는 "지식"과 "행동"을 가지고 있기 때문.  
즉, 객체가 수행할 책임 : 요청 + 응답  
  
-----------------
 ### [책임] ###  
 책임을 가진다 = 요청에 대해 대답해 줄 수 있다, 적절한 행동을 할 의무가 있다.  
 어떤 대상에 대한 요청 = 요청을 처리할 책임이 있다.  
   
 <책임의 분류>
 1. 하는 것(doing)
    - 객체를 생성, 계산 하는 등 스스로 하는 것
    - 다른 객체의 행동을 시작시키는 것
    - 다른 객체의 활동을 제어하고 조절하는 것
 2. 아는 것(knowing)
    - 개인적인 정보에 관해 아는 것
    - 관련된 객체에 관해 아는 것
    - 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것  
   
 즉, 책임 = 객체의 외부에 제공해 줄 수 있는 정보(아는 것) + 서비스(하는 것)  
 따라서, 책임은 객체의 공용 인터페이스(public interface)를 구성 -> 캡슐화로 이어짐.  
   
 송신자 - 메시지(책임) 전송 - 수신자  ==> 상호협력  
 -----------------
 ### [역할] ### 
 책임의 집합 : 객체가 협력 안에서 수행하는 역할  
 역할 : 재사용 가능, 유연한 객체지향 설계 낳는 구성요소  
   
 판사, 증인 -> '역할(role)'로 사용하여 하나의 협력으로 추상화 가능.  
   
 역할 : 협력 내에서 다른 객체로 <b>대체 가능</b>  
 -> 역할 대체 위해서는 각 역할이 수신할 수 있는 메시지를 동일한 방식으로 이해해야 한다.  
   
 동일한 역할을 수행할 수 있다는 것 = 객체들이 협력 내에서 동일한 책임의 집합을 수행할 수 있다는 것  
   
 <역할의 장점>
 1. 유사한 협력 추상화해서 인지 과부화 줄임
 2. 다양한 객체의 참여로 협력이 유연해짐
 3. 재사용성 높아짐  
   
 역할 => 객체지향 설계의 "단순성(simplicity)", "유연성(flexibility)", "재사용성(reusability)" 뒷받침하는 핵심 개념.  
  
- 역할을 이용하면 협력을 추상화 -> 단순화 시킬 수 있음
- 따라서 역할은 다른 객체에 의해 대체 가능함.
- 객체의 타입과 역할 사이에는 "일반화/특수화 관계"가 성립
    - 일반화 : 좀 더 일반적인 개념
    - 특수화 : 좀 더 구체적인 개념

<b>역할 자체가 객체의 추상화이기 때문에 역할이 협력을 추상적으로 만들 수 있다.<b>  
역할의 대체 가능성 -> 행위 호환성 -> 동일한 책임의 수행  
 
 -----------------
 ### [객체의 모양을 결정하는 협력] ### 
 데이터는 객체가 행위를 수행하는데 필요한 재료일 뿐,  
 실제로 중요한 것은 객체의 <b>행동, 책임</b>  
   
 협력을 설계한다 = 객체들이 주고받을 요청과 응답의 흐름을 결정한다  
   
 책임을 할당 -> 객체가 외부에 제공하게 될 행동이 된다.  
   
 책임 -> 행동 -> 데이터 -> 클래스의 구현 방법  
   
 객체가 가져야 하는 상태와 행위에 대해 고민하기 전, <b>그 객체가 참여할 문맥인 협력을 정의하라.</b>  
 객체를 충분히 "협력적"으로 만든 후 협력이란 문맥 안에서 "자율적"인 존재로 만들 것.  
 
 -----------------
 ### [객체지향 설계 기법] ### 
1. 책임-주도 설계(Responsibility-Driven Design) 방법
    - 협력에 필요한 책임들 식별하고 적합한 객체에 책임을 할당하는 방식
    - 객체의 "책임"과 "상호작용"에 집중
    - 설계 절차
        1) 시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악
        2) 시스템 책임을 더 작은 책임으로 분할
        3) 분할된 책임을 수행할 적절한 객체/역할을 찾아 책임 할당
        4) 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체/역할을 찾기
        5) 해당 객체/역할에게 책임 할당함으로써 두 객체가 협력  
  
2. 디자인 패턴(Design Pattern)
    - 반복적으로 사용하는 해결 방법 정의 해놓은 설계 템플릿의 모음
    - 책임-주도 설계의 결과물이자 지름길
    - 특정 상황에서 설계를 돕기 위해 모방, 수정할 수 있는 과거의 설계 경험
    - 디자인 패턴 = 반복 발생 문제 + 해법
    - 공통으로 사용할 수 있는 역할, 책임, 협력의 템플릿
    
3. 테스트-주도 개발(Test-Driven Development)
    - 테스트 작성 후 통과하는 구체적인 코드 추가하며 애플리케이션 완성해나가는 방식
    - 구체적인 코드 작성해나가며 역할, 책임, 협력을 식별하고 식별된 역할, 책임, 협력이 적합한지 피드백 받는 것
    - 실패 테스트 작성 -> 테스트 통과하는 간단한 코드 작성 -> 리팩터링을 통해 중복 제거 -> 클린 코드 획득
    - 메시지 수신 시 어떤 결과를 반환하고 그 과정에서 어떤 객체와 협력할 것인지에 대한 기대를 코드의 형태로 작성하는 것  
  
  
