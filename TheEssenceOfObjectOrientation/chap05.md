# 05. 책임과 메시지 #
    
    
책임감 분산(diffusion of responsibility) : 사건에 대한 목격자가 많으면 많을수록 개인이 느기는 책임감이 적어진다.  
-> 명확한 책임과 역할을 지닌 참가자들이 협력에 참여해야 한다는 것.
    
훌륭한 객체지향 = 명확하게 정의된 역할과 책임을 지닌 객체들이 상호 협력하는 관계  
   
 -----------------
 ### [자율적인 책임] ###   
 객체지향 공동체를 구성하는 기본 단위 : 자율적인 객체  
 자율적인 객체 = 스스로 정한 원칙에 따라 판단하고 스스로의 의지를 기반으로 행동하는 객체.   
   
 - 객체가 자율적으로 책임을 수행하기 위해서 <b>객체에게 할당되는 책임이 자율적이어야 한다.</b>  
    - "목격했던 장면을 떠올린 후 시간 순서로 재구성하여.." 보다 "증언하라"가 더 <b>포괄적, 추상적, 명확하다.</b>
 - 추상적이고 포괄적인 책임 -> 협력을 재사용할 수 있도록 유연성을 제공
 - 그러나, 책임은 협력에 참여하는 의도를 명확하게 설명할 수 있는 수준 안에서 추상적이어야 한다
 - '어떻게(how)'가 아니라 '무엇(what)'을 해야 하는가를 설명해야 한다
 - 메시지 : 객체가 자신의 책임, 행동을 수행하게 만드는 유일한 방법이다.  
   
  -----------------
 ### [메시지와 메서드] ###  
 <메시지>  
 - 메시지 전송 = 객체의 행동 유발  
   
 - 메시지 = 수신자(모자장수) + 메시지 이름(증언하라) + 인자(날짜, 장소)  
 -> 모자장수.증언하라(어제, 왕국)  
   
 - 메시지 : 객체들이 서로 협력하기 위해 사용할 수 있는 유일한 의사소통 수단.  
 즉, 객체가 메시지를 수신할 수 있다 = 객체가 메시지에 해당하는 책임을 수행할 수 있다  
   
 - 객체는 메시지 처리 방법을 자율적으로 선택할 수 있다   
  -> 외부 객체는 수신자 내부를 볼 수 없기 때문에 객체의 외부/내부가 분리된다.  
   
 <메서드>  
- 메서드 : 메시지 처리 위해 내부적으로 선택하는 방법 
- 무엇이 실행되기를 바라는지 명시, 어떤 메서드 선택할 지는 전적으로 수신자의 결정
- 객체지향 언어는 런타임 시간에 메서드를 선택할 수 있다는 점이 컴파일 시간에 메서드를 결정하는 절차적 언어와 구분지어지는 특징
  
 <다형성>  
 - 다형성 : 서로 다른 유형의 객체가 동일한 메시지에 대해 서로 다르게 반응하는 것.
 - 송신자의 관점 : 수신자 구별 필요 없이 기대하는 책임의 결과가 같은 것
 - 서로 다른 객체들이 다형성을 만족시킨다는 것 = 객체들이 동일한 책임을 공유한다는 것
 - 다형성 = 대체 가능성 -> 재사용 가능 -> 수신자의 종류를 <b>캡슐화</b>  
 - 객체 타입에 대한 결합도를 메시지에 대한 결합도로 낮춤 => 메시지 이해할 수 있는 어떤 객체와도 협력할 수 있는 유연하고 확장 가능한 구조 만들 수 있음  
 - 송신자가 수신자에 대해 매우 적은 정보만 알더라도 상호 협력이 가능하다
    1. 협력이 유연해진다
    2. 협력이 수행되는 방식을 확장할 수 있다
    3. 협력이 수행되는 방식을 재사용할 수 있다
  - 메시지 기반 객체 사이의 낮은 결합도 : 설계 유연하게, 확장 가능, 재사용 가능하게 함.
  - 즉, 설계 품질 향상 -> 훌륭한 메시지 선택해야 함
   
  -----------------
 ### [메시지를 따라라] ###   
 - 객체지향에서의 유일한 의사소통 방법 = 메시지 전송
 - 객체지향의 시작은 메시지를 주고받는 동적인 객체들의 집합으로 바라보는 것에서 시작
 - 데이터-주도 설계 : 데이터 중심으로 객체 설계하는 방식, 객체의 자율성 저해
 - 객체가 메시지를 선택하는 것이 아니라, <b>메시지가 객체를 선택하게 해야 한다.</b>
 - 책임-주도 설계 : 객체들 간의 메시지 기반으로 적절한 역할, 책임, 협력 발견하는 것
    1. 시스템의 책임을 객체의 책임으로 할당
    2. 도움 요청 위해 어떤 메시지 필요한지 결정
    3. 메시지 수신할 객체 선택
 - 메시지가 수신자의 책임 결정
 - What/Who 사이클 : 어떤 행위(what)를 수행할 것인지 결정한 후 누가(who) 그 행위를 수행할 것인가 결정하는 것
 - 협력이라는 문맥 안에서 객체의 책임을 결정하는 것 -> 메시지
 - 메시지를 먼저 결정함으로써 객체의 인터페이스 발견할 수 있다
 - 묻지 말고 시켜라 스타일(Tell, Don't Ask) = 데메테르 법칙(Law of Demeter) : 메시지를 먼저 결정하고 객체가 따르게 설계하는 방식
    - 메시지 수신자의 캡슐화 증진
    - 송신자와 수신자가 느슨하게 결합
    - 객체 자율적으로 만들고 캡슐화 보장, 결합도 낮게 유지시켜 설계를 유연하게 만듦.
    - 인터페이스 크기 감소시켜 의존성 적어짐, 설계 유연성 증가, 의도 명확
  - 메시지 수신 객체가 메시지의 의미를 이해하고 전송 객체의 의도대로 요청을 잘 처리할 수 있느냐가 중요
  
  
  -----------------
 ### [객체 인터페이스] ###   
 인터페이스 : 두 사물이 마주치는 경계 지점에서 서로 상호작용할 수 있게 이어주는 방법, 장치  
 특징  
 1. 인터페이스의 사용법을 익히면 내부 구조나 동작 방식 몰라도 쉽게 대상을 조작하거나 의사 전달할 수 있다
 2. 단순히 내부 구성이나 작동 방식을 변경하는 것은 인터페이스 사용자에게 어떤 영향도 미치지 않는다.
 3. 대상이 변경되더라도 동일한 인터페이스 제공하기만 하면 아무런 문제 없이 상호작용할 수 있다.
  
 인터페이스 : 객체가 수신할 수 있는 메시지의 목록 -> 객체가 어떤 메시지 수신할 수 있는지 -> 객체가 제공하는 인터페이스의 모양 결정  
   
 인터페이스 = 공용 인터페이스(외부에서 접근 가능) + 감춰진 인터페이스(내부에서만 접근 가능)  
 (모든 인터페이스는 메시지 전송을 통해서만 접근 가능)  
   
 책임 : 객체가 메시지 수신 시 수행해야하는 객체의 행동  
 인터페이스 : 객체가 외부로부터 수신할 수 있는 메시지의 목록  
   
 - 협력에 참여하는 객체는 자율적
 - 인터페이스는 메시지의 목록, 객체가 메시지 수신하면 적절한 책임이 수행된다
 - 어떤 메시지 수신할 수 있냐에 따라 어떤 책임을 수행할지와 어떤 인터페이스를 가질지 결정한다
 - 공용 인터페이스는 객체의 외부와 내부를 명확하게 분리한다.  
    
  -----------------
 ### [인터페이스와 구현의 분리] ###   
 객체지향적 사고방식을 이해하기 위한 법칙  
 1. 좀 더 추상적인 인터페이스 : 추상화 기법을 통해 수신자의 자율성 보장
 2. 최소 인터페이스 : 외부에서 사용할 필요 없는 인터페이스는 최대한 노출시키지 않는 것. 
 3. 인터페이스와 구현 간에 차이가 있다는 점 인식 : 객체의 외부와 내부 명확하게 분리하는 것이 중요
   
 <구현(implementation)>
 - 객체지향에서 내부 구조와 작동 방식 가리키는 것
 - 상태를 어떻게 표현할 것인가, 수신한 메시지 어떻게 처리할 것인가(메서드)
 - 객체의 공용 인터페이스와 구현을 명확하게 분리해야 한다  
     
 인터페이스와 구현의 분리 원칙 : 객체 외부에 노출되는 인터페이스와 내부에 숨겨지는 구현을 명확하게 분리해서 고려해야 하는 것.  
 *소프트웨어는 항상 변경되기 때문*  
    - 안전지대(구현, 객체 내부) + 위험지대(공용 인터페이스, 객체 외부)  
    - 변경을 관리하기 위한 것
    - 느슨한 인터페이스에 대해서만 결합되도록 만드는 것 -> 캡슐화  
   
 <캡슐화>  
 정보 은닉(information hiding), 객체의 자율성 보존 위해 구현을 외부로부터 감추는 것  
   
 객체지향 세계에서 사용되는 두 가지 관점
 1. 상태와 행위의 캡슐화
    - 데이터 캡슐화 : 객체는 상태와 행동을 하나의 단위로 묶는 자율적인 실체, 인터페이스와 구현을 분리하기 위한 실체
    - 데이터와 프로세스를 객체라는 하나의 틀 안으로 함께 묶어 객체의 자율성 보장하는 것
 2. 사적인 비밀의 캡슐화
    - 개인적인 비밀은 공용 인터페이스의 뒤에 감춤으로써 외부의 불필요한 공격과 간섭으로부터 내부 상태 격리
    - 공용 인터페이스를 경계로 최댛단 자율성 보장받는 것
    - 외부에 대한 파급효과 최소화 위해 외부 객체는 공용 인터페이스에만 의존, 구현 세부 사항에 대해서는 직접적으로 의존해서는 안된다
   
 객체를 자율적인 존재로 본디 -> 객체의 내부와 외부를 엄격히 분리한다   
 자율적인 책임의 특성 : 자율적인 책임을 수행하게 하는 메시지의 특성  
   
  -----------------
 ### [책임의 자율성이 협력의 품질을 결정한다] ###   
 객체의 책임이 자율적일수록 -> 협력 이해가 쉬워지고, 유연하게 변경 가능, 전체적인 협력의 설계 품질 결정  
   
1. 자율적인 책임은 협력을 단순하게 만든다 : 책임이 적절하게 추상화된다
2. 자율적인 책임은 모자 장수의 외부와 내부를 명확하게 분리한다 : 사적인 부분이 객체 내부로 캡슐화되기 때문에 인터페이스와 구현이 분리된다.
3. 책임이 자율적일 경우 책임을 수행하는 내부적인 방법을 변경하더라도 외부에 영향을 미치지 않는다 : 변경 파급효과가 객체 내부로 캡슐화 -> 객체 간 결합도 낮아짐
4. 자율적인 책임은 협력의 대상을 다양하게 선택할 수 있는 유연성을 제공한다 : 설계가 유연해지고 재사용성 높아진다
5. 객체가 수행하는 책임들이 자율적일수록 객체의 역할을 이해하기 쉬워진다 : 책임 자율적일수록 객체의 응집도를 높은 상태로 유지하기 쉬워짐
  
책임이 자유로워질수록 <b>추상화, 응집도 낮아짐, 결합도 낮아짐, 캡슐화 증진, 인터페이스와 구현 명확히 분리, 설계의 유연성과 재사용성 향상.</b>  
  
=> 책임을 자율적으로 만들고 선택하는 메시지에 따라 달라진다.  
  
